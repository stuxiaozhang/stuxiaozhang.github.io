<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/stuxiaozhang/blogimage/img/20220330150132.png"><link rel="icon" href="https://cdn.jsdelivr.net/gh/stuxiaozhang/blogimage/img/20220330150132.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content="mySQL0. 数据库常见概念0.1 概念数据库：英文单词DataBase，简称DB。按照一定格式存储数据的一些文件的组合。顾名思义：存储数据的仓库，实际上就是一堆文件。这些文件中存储了具有特定格式的数据。
数据库管理系统：DataBaseManagement，简称DBMS。数据库管理系统是专门用来管理数据库中数据的，数据库管理系统可以对数据库当中的数据进行增删改查。
常见的数据库管理系统：MyS"><meta name="author" content="小张同学"><meta name="keywords" content=""><title>mySQL - 小张同学的博客</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"stuxiaozhang.github.io",root:"/",version:"1.8.11",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:4},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"81O1jSOqY3veRxOg71BDYfri-gzGzoHsz",app_key:"CgnvRL262D07ied40NiXm2VL",server_url:null}},search_path:"/local-search.xml"}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.3.0"></head><body><header style="height:50vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>xiaozhang's space</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/schedule/"><i class="iconfont icon-cliplist"></i> 动态</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://cdn.jsdelivr.net/gh/stuxiaozhang/blogimage/img/20220330150632.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="mySQL"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 小张同学 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-04-15 21:09" pubdate>2022年4月15日</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 11.9k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 101 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-1"></div><div class="col-lg-9 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">mySQL</h1><p class="note note-info">本文最后更新于：2022年4月18日</p><div class="markdown-body"><h1 id="mySQL"><a href="#mySQL" class="headerlink" title="mySQL"></a>mySQL</h1><h2 id="0-数据库常见概念"><a href="#0-数据库常见概念" class="headerlink" title="0. 数据库常见概念"></a>0. 数据库常见概念</h2><h3 id="0-1-概念"><a href="#0-1-概念" class="headerlink" title="0.1 概念"></a>0.1 概念</h3><p><strong>数据库：</strong>英文单词DataBase，简称DB。按照一定格式存储数据的一些文件的组合。顾名思义：存储数据的仓库，实际上就是一堆文件。这些文件中存储了具有特定格式的数据。</p><p><strong>数据库管理系统：</strong>DataBaseManagement，简称DBMS。数据库管理系统是专门用来管理数据库中数据的，数据库管理系统可以对数据库当中的数据进行增删改查。</p><p><strong>常见的数据库管理系统：</strong>MySQL、Oracle、MS SqlServer、DB2、sybase等….</p><p><strong>SQL：结构化查询语言</strong>。通过编写SQL语句，然后DBMS负责执行SQL语句，最终来完成数据库中数据的增删改查操作。</p><p>SQL是一套标准，程序员主要学习的就是SQL语句，这个SQL在mysql中可以使用，<br>同时在Oracle中也可以使用，在DB2中也可以使用。</p><p><strong>三者之间的关系？</strong>DBMS—&gt; 执行—&gt; SQL —操作—&gt; DB</p><h3 id="0-2-SQL语句分类"><a href="#0-2-SQL语句分类" class="headerlink" title="0.2 SQL语句分类"></a>0.2 SQL语句分类</h3><p><strong>DQL：</strong>数据查询语言（凡是带有sel ect关键字的都是查询语句）</p><ul><li>select…</li></ul><p><strong>DML：</strong>数据操作语言（凡是对表当中的数据进行增删改的都是DML）insert delete update。这个主要是操作表中的数据data。</p><ul><li>insert 增</li><li>delete 删</li><li>update 改</li></ul><p><strong>DDL：</strong>数据定义语言（凡是带有create、drop、alter的都是DDL。）这个增删改和DML不同，这个主要是对表结构进行操作。</p><ul><li>DDL主要操作的是表的结构。不是表中的数据。</li><li>create：新建，等同于增</li><li>drop：删除</li><li>alter：修改</li></ul><p><strong>TCL：</strong>事务控制语言。</p><ul><li>事务提交：commit;</li><li>事务回滚：rollback;</li></ul><p><strong>DCL：</strong>是数据控制语言。</p><ul><li>授权grant</li><li>撤销权限revoke</li><li>….</li></ul><h3 id="0-3-mySQL中的数据类型"><a href="#0-3-mySQL中的数据类型" class="headerlink" title="0.3 mySQL中的数据类型"></a>0.3 mySQL中的数据类型</h3><p><strong>varchar(最长255)</strong>：可变长度的字符串，比较智能，节省空间。会根据实际的数据长度动态分配空间。</p><ul><li>优点：节省空间</li><li>缺点：需要动态分配空间，速度慢。</li></ul><p><strong>char(最长255)</strong>：定长字符串，不管实际的数据长度是多少，分配固定长度的空间去存储数据。使用不恰当的时候，可能会导致空间的浪费。</p><ul><li>优点：不需要动态分配空间，<strong>速度快。</strong>​</li><li>缺点：使用不当可能会导致空间的浪费。</li></ul><p><strong>varchar和char我们应该怎么选择？</strong></p><ul><li>性别字段你选什么？因为性别是固定长度的字符串，所以选择char。<br>​</li><li>姓名字段你选什么？每一个人的名字长度不同，所以选择varchar。</li></ul><p><strong>int(最长11)</strong>：数字中的整数型。等同于java的int。</p><p><strong>bigint</strong>：数字中的长整型。等同于java中的long。</p><p><strong>float</strong>：单精度浮点型数据</p><p><strong>double</strong>：双精度浮点型数据</p><p><strong>date</strong>：短日期类型</p><p><strong>datetime</strong>：长日期类型</p><p><strong>clob</strong>：字符大对象。最多可以存储4G的字符串。<br>比如：存储一篇文章，存储一个说明。超过255个字符的都要采用CLOB字符大对象来存储。<br>Character Large OBject:CLOB</p><p><strong>blob</strong>：二进制大对象。Binary Large OBject。专门用来存储图片、声音、视频等流媒体数据。<br>往BLOB类型的字段上插入数据的时候，例如插入一个图片、视频等，你需要使用IO流才行。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">t_movie 电影表（专门存储电影信息的）<br>编号<span class="hljs-keyword">no</span>(<span class="hljs-type">bigint</span>)	名字name(<span class="hljs-type">varchar</span>)		故事情节history(<span class="hljs-type">clob</span>)	<br>上映日期playtime(<span class="hljs-type">date</span>)		时长<span class="hljs-type">time</span>(<span class="hljs-keyword">double</span>)		海报image(<span class="hljs-type">blob</span>)<br>类型type(<span class="hljs-type">char</span>)							<br></code></pre></td></tr></table></figure><h3 id="0-4-SQL脚本的执行"><a href="#0-4-SQL脚本的执行" class="headerlink" title="0.4 SQL脚本的执行"></a>0.4 SQL脚本的执行</h3><p>xxxx.sql 这种文件被称为sql脚本文件。</p><p>sql脚本文件中编写了大量的sql语句。</p><p>我们执行sql脚本文件的时候，该文件中所有的sql语句会全部执行！批量的执行SQL语句，可以使用sql脚本文件。</p><p><code>mysql&gt; source D:\course\03-MySQL\document\vip.sql</code></p><blockquote><p>你在实际的工作中，第一天到了公司，项目经理会给你一个xxx.sql文件，你执行这个脚本文件，你电脑上的数据库数据就有了！</p></blockquote><h3 id="0-5-数据库和表的导入导出"><a href="#0-5-数据库和表的导入导出" class="headerlink" title="0.5 数据库和表的导入导出"></a>0.5 数据库和表的导入导出</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql">数据导出？<br>	注意：在windows的dos命令窗口中：<br>		mysqldump bjpowernode<span class="hljs-operator">&gt;</span>D:\bjpowernode.sql <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>p123456<br>	可以导出指定的表吗？<br>		mysqldump bjpowernode emp<span class="hljs-operator">&gt;</span>D:\bjpowernode.sql <span class="hljs-operator">-</span>uroot <span class="hljs-operator">-</span>p123456<br><br>数据导入？<br>	注意：需要先登录到mysql数据库服务器上。<br>	然后创建数据库：<span class="hljs-keyword">create</span> database bjpowernode;<br>	使用数据库：use bjpowernode<br>	然后初始化数据库：source D:\bjpowernode.sql<br></code></pre></td></tr></table></figure><h2 id="1-数据库操作"><a href="#1-数据库操作" class="headerlink" title="1. 数据库操作"></a>1. 数据库操作</h2><p><strong>show databases;</strong> 查看mysql中有哪些数据库</p><p><strong>use test;</strong> 表示正在使用一个名字叫做test的数据库。</p><p><strong>create database db01;</strong> 创建数据库</p><p><strong>show tables;</strong> 查看某个数据库下有哪些表</p><p><strong>select version();</strong> 查看mysql数据库的版本号</p><p><strong>select database();</strong> 查看当前使用的是哪个数据库</p><p><strong>\c</strong> 用来终止一条命令的输入。</p><h2 id="2-建表操作"><a href="#2-建表操作" class="headerlink" title="2. 建表操作"></a>2. 建表操作</h2><h3 id="2-1-创建一个表create"><a href="#2-1-创建一个表create" class="headerlink" title="2.1 创建一个表create"></a>2.1 创建一个表create</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">学号、姓名、年龄、性别、邮箱地址<br>	<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_student(<br>        <span class="hljs-keyword">no</span> <span class="hljs-type">int</span>,<br>        name <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>),<br>        sex <span class="hljs-type">char</span>(<span class="hljs-number">1</span>),<br>        age <span class="hljs-type">int</span>(<span class="hljs-number">3</span>),<br>        email <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)<br>    );<br></code></pre></td></tr></table></figure><h3 id="2-2-删除一个表drop"><a href="#2-2-删除一个表drop" class="headerlink" title="2.2 删除一个表drop"></a>2.2 删除一个表drop</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> t_student; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 当这张表不存在的时候会报错！<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 如果这张表存在的话，删除<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_student;<br></code></pre></td></tr></table></figure><ul><li>对表结构的修改需要使用：<strong>alter</strong>属于DDL语句</li><li><strong>desc</strong> t_student 查看表结构</li></ul><h3 id="2-3-插入数据insert"><a href="#2-3-插入数据insert" class="headerlink" title="2.3 插入数据insert"></a>2.3 插入数据insert</h3><ul><li>insert into 表名(字段名1,字段名2,字段名3…) values(值1,值2,值3);</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(<span class="hljs-keyword">no</span>,name,sex,age,email)<br>	<span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-string">&#x27;m&#x27;</span>,<span class="hljs-number">20</span>,<span class="hljs-string">&#x27;zhangsan@123.com&#x27;</span>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(email,name,sex,age,<span class="hljs-keyword">no</span>)<br>	<span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;lisi@123.com&#x27;</span>,<span class="hljs-string">&#x27;lisi&#x27;</span>,<span class="hljs-string">&#x27;f&#x27;</span>,<span class="hljs-number">20</span>,<span class="hljs-number">2</span>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(<span class="hljs-keyword">no</span>) <span class="hljs-keyword">values</span>(<span class="hljs-number">3</span>);<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>省略字段名<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;lisi&#x27;</span>, <span class="hljs-string">&#x27;f&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;lisi@123.com&#x27;</span>);<br></code></pre></td></tr></table></figure><ul><li>insert 语句但凡是执行成功了，那么必然会多一条记录。没有给其它字段指定值的话，默认值是NULL。</li></ul><p><strong>一次插入多条数据</strong></p><ul><li>insert into t_user(字段名1,字段名2) values(),(),(),();</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user(id,name,birth,create_time) <span class="hljs-keyword">values</span><br>		(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;zs&#x27;</span>,<span class="hljs-string">&#x27;1980-10-11&#x27;</span>,now()), <br>		(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;lisi&#x27;</span>,<span class="hljs-string">&#x27;1981-10-11&#x27;</span>,now()),<br>		(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;wangwu&#x27;</span>,<span class="hljs-string">&#x27;1982-10-11&#x27;</span>,now());<br></code></pre></td></tr></table></figure><h3 id="2-4-修改数据update"><a href="#2-4-修改数据update" class="headerlink" title="2.4 修改数据update"></a>2.4 修改数据update</h3><ul><li><p>update 表名 set 字段名1=值1,字段名2=值2,字段名3=值3… where 条件;</p></li><li><p>没有条件限制会导致所有数据全部更新。</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> t_user <span class="hljs-keyword">set</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;jack&#x27;</span>, birth <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2000-10-11&#x27;</span> <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br><br><span class="hljs-keyword">update</span> t_user <span class="hljs-keyword">set</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;jack&#x27;</span>, birth <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;2000-10-11&#x27;</span>, create_time <span class="hljs-operator">=</span> now() <span class="hljs-keyword">where</span> id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><h3 id="2-5-删除数据"><a href="#2-5-删除数据" class="headerlink" title="2.5 删除数据"></a>2.5 删除数据</h3><p><strong>delete</strong>语句删除数据的原理？（delete属于DML语句！！！）</p><ul><li>表中的数据被删除了，但是这个数据在硬盘上的真实存储空间不会被释放！！！</li><li>这种删除缺点是：删除效率比较低。</li><li>这种删除优点是：支持回滚，后悔了可以再恢复数据！！！</li></ul><p><strong>truncate</strong>语句删除数据的原理？</p><ul><li>这种删除效率比较高，表被一次截断，物理删除。</li><li>这种删除缺点：不支持回滚。</li><li>这种删除优点：快速。</li></ul><h4 id="2-5-1-delete"><a href="#2-5-1-delete" class="headerlink" title="2.5.1 delete"></a>2.5.1 delete</h4><ul><li>delete from 表名 where 条件;</li><li><p>没有条件，整张表的数据会全部删除！</p></li><li><p>delete from t_user where id = 2;</p></li></ul><h4 id="2-5-2-truncate"><a href="#2-5-2-truncate" class="headerlink" title="2.5.2 truncate"></a>2.5.2 truncate</h4><ul><li>truncate table dept_bak; （这种操作属于DDL操作。）</li></ul><p>下列演示内容所用表</p><p><img src="C:/Users/HP/AppData/Roaming/Typora/typora-user-images/image-20220415214055230.png" srcset="/img/loading.gif" lazyload alt="image-20220415214055230"></p><h2 id="3-单表查询"><a href="#3-单表查询" class="headerlink" title="3. 单表查询"></a>3. 单表查询</h2><h3 id="3-1-基础条件查询"><a href="#3-1-基础条件查询" class="headerlink" title="3.1 基础条件查询"></a>3.1 基础条件查询</h3><ul><li>select 字段1,字段2,字段3…. from 表名 where 条件;</li></ul><p><strong>= 等于</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询薪资等于<span class="hljs-number">800</span>的员工姓名和编号？<br>	<span class="hljs-keyword">select</span> empno,ename <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">=</span> <span class="hljs-number">800</span>;<br>查询SMITH的编号和薪资？<br>	<span class="hljs-keyword">select</span> empno,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;SMITH&#x27;</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span>字符串使用单引号<br></code></pre></td></tr></table></figure><p><strong>&lt;&gt;或!= 不等于</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询薪资不等于<span class="hljs-number">800</span>的员工姓名和编号？<br>	<span class="hljs-keyword">select</span> empno,ename <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">!=</span> <span class="hljs-number">800</span>;<br>	<span class="hljs-keyword">select</span> empno,ename <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-number">800</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 小于号和大于号组成的不等号<br></code></pre></td></tr></table></figure><p><strong>&lt; 小于</strong> <strong>&lt;= 小于等于</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询薪资小于等于<span class="hljs-number">3000</span>的员工姓名和编号？<br>	<span class="hljs-keyword">select</span> empno,ename,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3000</span>;<br></code></pre></td></tr></table></figure><p><strong>(&gt;)大于 </strong><strong>(&gt;=) 大于等于</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询薪资大于等于<span class="hljs-number">3000</span>的员工姓名和编号？<br><span class="hljs-keyword">select</span> empno,ename,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&gt;=</span> <span class="hljs-number">3000</span>;<br></code></pre></td></tr></table></figure><p><strong>between … and ….</strong> 两个值之间, 等同于 &gt;= and &lt;=</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询薪资在<span class="hljs-number">2450</span>和<span class="hljs-number">3000</span>之间的员工信息？包括<span class="hljs-number">2450</span>和<span class="hljs-number">3000</span><br>	第一种方式：<span class="hljs-operator">&gt;=</span> <span class="hljs-keyword">and</span> <span class="hljs-operator">&lt;=</span> （<span class="hljs-keyword">and</span>是并且的意思。）<br>		<span class="hljs-keyword">select</span> empno,ename,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&gt;=</span> <span class="hljs-number">2450</span> <span class="hljs-keyword">and</span> sal <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3000</span>;	<br>    第二种方式：<br>    	<span class="hljs-keyword">select</span> empno,ename,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-keyword">between</span> <span class="hljs-number">2450</span> <span class="hljs-keyword">and</span> <span class="hljs-number">3000</span>;	<br></code></pre></td></tr></table></figure><p><strong>is null 为 null（is not null 不为空）</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询哪些员工的津贴<span class="hljs-operator">/</span>补助为<span class="hljs-keyword">null</span>？<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> empno,ename,sal,comm <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> comm <span class="hljs-operator">=</span> <span class="hljs-keyword">null</span>;<br><br>查询哪些员工的津贴<span class="hljs-operator">/</span>补助不为<span class="hljs-keyword">null</span>？<br>	<span class="hljs-keyword">select</span> empno,ename,sal,comm <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> comm <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>;<br></code></pre></td></tr></table></figure><p><strong>and 并且 or 或者</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span>  <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&gt;</span> <span class="hljs-number">2500</span> <span class="hljs-keyword">and</span> (deptno <span class="hljs-operator">=</span> <span class="hljs-number">10</span> <span class="hljs-keyword">or</span> deptno <span class="hljs-operator">=</span> <span class="hljs-number">20</span>);<br><br><span class="hljs-keyword">and</span>和<span class="hljs-keyword">or</span>同时出现，<span class="hljs-keyword">and</span>优先级较高。如果想让<span class="hljs-keyword">or</span>先执行，需要加“小括号”，以后在开发中，如果不确定优先级，就加小括号就行了。<br></code></pre></td></tr></table></figure><p><strong>in 包含，相当于多个 or （not in 不在这个范围中）</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询工作岗位是MANAGER和SALESMAN的员工？<br>	<span class="hljs-keyword">select</span> empno,ename,job <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> job <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;MANAGER&#x27;</span> <span class="hljs-keyword">or</span> job <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;SALESMAN&#x27;</span>;<br>	<span class="hljs-keyword">select</span> empno,ename,job <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> job <span class="hljs-keyword">in</span>(<span class="hljs-string">&#x27;MANAGER&#x27;</span>, <span class="hljs-string">&#x27;SALESMAN&#x27;</span>);<br></code></pre></td></tr></table></figure><p><strong>not 可以取非，主要用在 is 或 in 中</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span><br><span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span><br><span class="hljs-keyword">in</span><br><span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span><br></code></pre></td></tr></table></figure><p><strong>like</strong></p><p>称为模糊查询，支持%或下划线匹配</p><ul><li>%匹配任意多个字符</li><li>下划线：任意一个字符。</li><li>（%是一个特殊的符号，_ 也是一个特殊符号）</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">找出名字中含有O的？<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> ename <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%O%&#x27;</span>;<br><br>找出名字中有“_”的？<br>	<span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> t_student <span class="hljs-keyword">where</span> name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%_%&#x27;</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span>这样不行。<br><br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> name <span class="hljs-keyword">from</span> t_student <span class="hljs-keyword">where</span> name <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%\_%&#x27;</span>; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> \转义字符。<br></code></pre></td></tr></table></figure><p><strong>distinct</strong></p><p>把查询结果去除重复记录【distinct】</p><ul><li>distinct 只能出现在所有字段的最前方。</li><li><p>distinct 出现在 job,deptno 两个字段之前，表示两个字段联合起来去重。</p></li><li><p>select distinct job from emp;</p></li><li>select distinct job,deptno from emp;</li></ul><h3 id="3-2-排序"><a href="#3-2-排序" class="headerlink" title="3.2 排序"></a>3.2 排序</h3><p>查询所有员工薪资，排序？</p><ul><li>select ename,sal from emp order by sal; // 默认是升序！！！</li></ul><p>指定降序：<strong>desc</strong></p><ul><li>select ename,sal from emp order by sal desc;</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">查询员工名字和薪资，要求按照薪资升序，如果薪资一样的话，再按照名字升序排列。<br>	<span class="hljs-keyword">select</span> <br>		ename,sal<br>	<span class="hljs-keyword">from</span><br>		emp<br>	<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span><br>		sal <span class="hljs-keyword">asc</span>, ename <span class="hljs-keyword">asc</span>;  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> sal在前，起主导，只有sal相等的时候，才会考虑启用ename排序。<br></code></pre></td></tr></table></figure><h3 id="3-3-分页"><a href="#3-3-分页" class="headerlink" title="3.3 分页"></a>3.3 分页</h3><ul><li><strong>limit</strong> 作用：将查询结果集的一部分取出来。通常使用在分页查询当中。<ul><li>完整用法：limit startIndex, length startIndex是起始下标，length是长度。</li><li>起始下标从0开始。</li><li>缺省用法：limit 5; 这是取前5.</li></ul></li></ul><p><strong>按照薪资降序，取出排名在前5名的员工？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">	<span class="hljs-keyword">select</span> <br>		ename,sal<br>	<span class="hljs-keyword">from</span><br>		emp<br>	<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> <br>		sal <span class="hljs-keyword">desc</span><br>	limit <span class="hljs-number">5</span>;  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>取前<span class="hljs-number">5</span>	 limit <span class="hljs-number">0</span>,<span class="hljs-number">5</span>;<br><br>mysql当中limit在<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>之后执行！！！！！！<br></code></pre></td></tr></table></figure><p><strong>取出工资排名在[3-5]名的员工？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">	<span class="hljs-keyword">select</span> <br>		ename,sal<br>	<span class="hljs-keyword">from</span><br>		emp<br>	<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span><br>		sal <span class="hljs-keyword">desc</span><br>	limit<br>		<span class="hljs-number">2</span>, <span class="hljs-number">3</span>;<br><span class="hljs-number">2</span>表示起始位置从下标<span class="hljs-number">2</span>开始，就是第三条记录。<br><span class="hljs-number">3</span>表示长度。<br></code></pre></td></tr></table></figure><ul><li><p>每页显示3条记录</p><ul><li>第1页：limit 0,3 [0 1 2]</li><li>第2页：limit 3,3 [3 4 5]</li><li>第3页：limit 6,3 [6 7 8]</li></ul></li><li><p>每页显示pageSize条记录</p><ul><li>第pageNo页：limit (pageNo - 1) * pageSize , pageSize</li></ul></li></ul><h2 id="4-函数"><a href="#4-函数" class="headerlink" title="4. 函数"></a>4. 函数</h2><h3 id="4-1-单行处理函数"><a href="#4-1-单行处理函数" class="headerlink" title="4.1 单行处理函数"></a>4.1 单行处理函数</h3><ul><li>单行处理函数的特点：一个输入对应一个输出。<ul><li>和单行处理函数相对的是：多行处理函数。（多行处理函数特点：多个输入，对应1个输出！）</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs sql">lower 转换小写<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">lower</span>(ename) <span class="hljs-keyword">as</span> ename <span class="hljs-keyword">from</span> emp;<br><br>upper 转换大写<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_student;<br><br>substr 取子串：substr(被截取的字符串, 起始下标, 截取的长度)<br>		<span class="hljs-keyword">select</span> substr(ename, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> ename <span class="hljs-keyword">from</span> emp;<br>		注意：起始下标从<span class="hljs-number">1</span>开始，没有<span class="hljs-number">0.</span><br>        找出员工名字第一个字母是A的员工信息？<br>			第一种方式：模糊查询<br>				<span class="hljs-keyword">select</span> ename <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;A%&#x27;</span>;<br>			第二种方式：substr函数<br>				<span class="hljs-keyword">select</span> <br>					ename <br>				<span class="hljs-keyword">from</span> <br>					emp <br>				<span class="hljs-keyword">where</span> <br>					substr(ename,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;A&#x27;</span>;<br><br>concat函数进行字符串的拼接<br>		<span class="hljs-keyword">select</span> concat(empno,ename) <span class="hljs-keyword">from</span> emp;<br><br>length 取长度<br>		<span class="hljs-keyword">select</span> length(ename) enamelength <span class="hljs-keyword">from</span> emp;<br><br>trim 去空格<br>		mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;  KING&#x27;</span>;<br><br>str_to_date 将字符串转换成日期<br>date_format 格式化日期<br>format 设置千分位<br>round 四舍五入<br>		<span class="hljs-keyword">select</span> 字段 <span class="hljs-keyword">from</span> 表名;<br>		<span class="hljs-keyword">select</span> ename <span class="hljs-keyword">from</span> emp;<br>		<span class="hljs-keyword">select</span> <span class="hljs-string">&#x27;abc&#x27;</span> <span class="hljs-keyword">from</span> emp; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">select</span>后面直接跟“字面量<span class="hljs-operator">/</span>字面值”<br><br>		mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-string">&#x27;abc&#x27;</span> <span class="hljs-keyword">as</span> bieming <span class="hljs-keyword">from</span> emp;<br>		<span class="hljs-keyword">select</span> round(<span class="hljs-number">1236.567</span>, <span class="hljs-number">1</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">from</span> emp;  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 保留<span class="hljs-number">1</span>个小数<br>		<span class="hljs-keyword">select</span> round(<span class="hljs-number">1236.567</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">from</span> emp;  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 保留<span class="hljs-number">2</span>个小数<br>		<span class="hljs-keyword">select</span> round(<span class="hljs-number">1236.567</span>, <span class="hljs-number">-1</span>) <span class="hljs-keyword">as</span> <span class="hljs-keyword">result</span> <span class="hljs-keyword">from</span> emp; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 保留到十位。<br><br>rand() 生成随机数<br>		mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> round(rand() <span class="hljs-operator">*</span> <span class="hljs-number">100</span>,<span class="hljs-number">0</span>) <span class="hljs-keyword">from</span> emp; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-number">100</span>以内的随机数<br><br>ifnull 可以将 <span class="hljs-keyword">null</span> 转换成一个具体值<br>		ifnull是空处理函数。专门处理空的。<br>		在所有数据库当中，只要有<span class="hljs-keyword">NULL</span>参与的数学运算，最终结果就是<span class="hljs-keyword">NULL</span>。<br>		mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> ename, sal <span class="hljs-operator">+</span> comm <span class="hljs-keyword">as</span> salcomm <span class="hljs-keyword">from</span> emp;<br></code></pre></td></tr></table></figure><h3 id="4-2-分组函数"><a href="#4-2-分组函数" class="headerlink" title="4.2 分组函数"></a>4.2 分组函数</h3><ul><li>多行处理函数的特点：输入多行，最终输出一行。<ul><li>count 计数</li><li>sum 求和</li><li>avg 平均值</li><li>max 最大值</li><li>min 最小值</li></ul></li><li>注意：<pre><code>分组函数在使用的时候必须先进行分组，然后才能用。
如果你没有对数据进行分组，整张表默认为一组。    
</code></pre></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">找出最高工资？<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">max</span>(sal) <span class="hljs-keyword">from</span> emp;<br>找出最低工资？<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(sal) <span class="hljs-keyword">from</span> emp;<br>计算工资和：<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">sum</span>(sal) <span class="hljs-keyword">from</span> emp;<br>计算平均工资：<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(sal) <span class="hljs-keyword">from</span> emp;<br>计算员工数量？<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(ename) <span class="hljs-keyword">from</span> emp;<br></code></pre></td></tr></table></figure><p><strong>分组函数在使用的时候需要注意哪些？</strong></p><ul><li><p>第一点：分组函数自动忽略NULL，你不需要提前对NULL进行处理。</p></li><li><p>第二点：分组函数中 count(*) 和 count(具体字段) 有什么区别？</p><ul><li>count(具体字段)：表示统计该字段下所有不为NULL的元素的总数。</li><li>count(*)：统计表当中的总行数。（只要有一行数据count则++）<br>因为每一行记录不可能都为NULL，一行数据中有一列不为NULL，则这行数据就是有效的。</li></ul></li><li><p>第三点：分组函数不能够直接使用在where子句中。<br>找出比最低工资高的员工信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> ename,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&gt;</span> <span class="hljs-built_in">min</span>(sal);<br>表面上没问题，运行一下？<br>ERROR <span class="hljs-number">1111</span> (HY000): Invalid use <span class="hljs-keyword">of</span> <span class="hljs-keyword">group</span> <span class="hljs-keyword">function</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="5-分组查询"><a href="#5-分组查询" class="headerlink" title="5.分组查询"></a>5.分组查询</h2><h3 id="5-1-group-by"><a href="#5-1-group-by" class="headerlink" title="5.1 group by"></a>5.1 group by</h3><p><strong>找出每个工作岗位的工资和？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">实现思路：按照工作岗位分组，然后对工资求和。<br>		<span class="hljs-keyword">select</span> <br>			job,<span class="hljs-built_in">sum</span>(sal)<br>		<span class="hljs-keyword">from</span><br>			emp<br>		<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span><br>			job;<br><br>以上这个语句的执行顺序？<br>先从emp表中查询数据。根据job字段进行分组。然后对每一组的数据进行<span class="hljs-built_in">sum</span>(sal)<br></code></pre></td></tr></table></figure><ul><li>在一条select语句当中，如果有group by语句的话，select 后面只能跟：<strong>参加分组的字段，以及分组函数</strong>。其它的一律不能跟。</li></ul><p><strong>找出每个部门的最高薪资</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">实现思路: 按照部门编号分组，求每一组的最大值。<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> deptno, <span class="hljs-built_in">max</span>(sal) <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> deptno;<br></code></pre></td></tr></table></figure><h3 id="5-2-联合分组"><a href="#5-2-联合分组" class="headerlink" title="5.2 联合分组"></a>5.2 联合分组</h3><p><strong>找出“每个部门，不同工作岗位”的最高薪资？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">技巧：两个字段联合成<span class="hljs-number">1</span>个字段看。（两个字段联合分组）<br>		<span class="hljs-keyword">select</span> <br>			deptno, job, <span class="hljs-built_in">max</span>(sal)<br>		<span class="hljs-keyword">from</span><br>			emp<br>		<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span><br>			deptno, job;<br></code></pre></td></tr></table></figure><h3 id="5-3-having"><a href="#5-3-having" class="headerlink" title="5.3 having"></a>5.3 having</h3><ul><li><p>使用having可以对分完组之后的数据进一步过滤。</p></li><li><p>having不能单独使用，having不能代替where，having必须和group by联合使用。</p></li></ul><p><strong>找出每个部门平均薪资，要求显示平均薪资高于2500的。</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <br>	deptno, <span class="hljs-built_in">avg</span>(sal)<br><span class="hljs-keyword">from</span><br>	emp<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span><br>	deptno<br><span class="hljs-keyword">having</span><br>	<span class="hljs-built_in">avg</span>(sal) <span class="hljs-operator">&gt;</span> <span class="hljs-number">2500</span>;<br></code></pre></td></tr></table></figure><ul><li>where和having，优先选择where，where实在完成不了了，再选择having。</li></ul><h3 id="5-4-总结sql执行顺序"><a href="#5-4-总结sql执行顺序" class="headerlink" title="5.4 总结sql执行顺序"></a>5.4 总结sql执行顺序</h3><ul><li>select —&gt; from —&gt; where —&gt; group by —&gt; having —&gt; order by —&gt;<br>以上关键字只能按照这个顺序来，不能颠倒。</li></ul><p>执行顺序？</p><ul><li>from —&gt; where —&gt; group by —&gt; having —&gt; select —&gt; order by</li></ul><ol><li>从某张表中查询数据，</li><li>先经过where条件筛选出有价值的数据。</li><li>对这些有价值的数据进行分组。</li><li>分组之后可以使用having继续筛选。</li><li>select查询出来。</li><li>最后排序输出！</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql">找出每个岗位的平均薪资，要求显示平均薪资大于<span class="hljs-number">1500</span>的，除MANAGER岗位之外，要求按照平均薪资降序排。<br><br><span class="hljs-keyword">select</span> <br>	job, <span class="hljs-built_in">avg</span>(sal) <span class="hljs-keyword">as</span> avg_sal<br><span class="hljs-keyword">from</span><br>	emp<br><span class="hljs-keyword">where</span><br>	job <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-string">&#x27;MANAGER&#x27;</span><br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span><br>	job<br><span class="hljs-keyword">having</span><br>	avg_sal<span class="hljs-operator">&gt;</span> <span class="hljs-number">1500</span><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span><br>	avgsal <span class="hljs-keyword">desc</span>;  <br></code></pre></td></tr></table></figure><h2 id="6-连表查询"><a href="#6-连表查询" class="headerlink" title="6. 连表查询"></a>6. 连表查询</h2><ul><li><p>从一张表中单独查询，称为单表查询</p></li><li><p>emp表和dept表联合起来查询数据，从emp表中取员工名字，从dept表中取部门名字。</p></li><li><p>这种跨表查询，多张表联合起来查询数据，被称为连接查询。</p><p>select ename,dname from emp, dept;</p></li><li><p>当两张表进行连接查询，没有任何条件限制的时候，最终查询结果条数，是两张表条数的乘积，这种现象被称为：笛卡尔积现象。</p></li></ul><h3 id="6-1-内连接之等值连接"><a href="#6-1-内连接之等值连接" class="headerlink" title="6.1 内连接之等值连接"></a>6.1 内连接之等值连接</h3><p><strong>查询每个员工所在部门名称，显示员工名和部门名？</strong></p><ul><li>emp e和dept d表进行连接。条件是：e.deptno = d.deptno</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql">SQL92语法：<br>	<span class="hljs-keyword">select</span> <br>		e.ename,d.dname<br>	<span class="hljs-keyword">from</span><br>		emp e, dept d<br>	<span class="hljs-keyword">where</span><br>		e.deptno <span class="hljs-operator">=</span> d.deptno;<br>	<br>	sql92的缺点：结构不清晰，表的连接条件，和后期进一步筛选的条件，都放到了<span class="hljs-keyword">where</span>后面。<br>	<br>SQL99语法：<br>	<span class="hljs-operator">/</span><span class="hljs-operator">/</span><span class="hljs-keyword">inner</span>可以省略（带着<span class="hljs-keyword">inner</span>可读性更好！！！一眼就能看出来是内连接）<br>	<span class="hljs-keyword">select</span> <br>		e.ename,d.dname<br>	<span class="hljs-keyword">from</span><br>		emp e<br>	<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span><br>		dept d<br>	<span class="hljs-keyword">on</span><br>		e.deptno <span class="hljs-operator">=</span> d.deptno; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 条件是等量关系，所以被称为等值连接。<br>	<br>	sql99优点：表连接的条件是独立的，连接之后，如果还需要进一步筛选，再往后继续添加<span class="hljs-keyword">where</span><br></code></pre></td></tr></table></figure><h3 id="6-2-内连接之非等值连接"><a href="#6-2-内连接之非等值连接" class="headerlink" title="6.2 内连接之非等值连接"></a>6.2 内连接之非等值连接</h3><p><strong>找出每个员工的薪资等级，要求显示员工名、薪资、薪资等级？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <br>	e.ename, e.sal, s.grade<br><span class="hljs-keyword">from</span><br>	emp e<br><span class="hljs-keyword">join</span><br>	salgrade s<br><span class="hljs-keyword">on</span><br>	e.sal <span class="hljs-keyword">between</span> s.losal <span class="hljs-keyword">and</span> s.hisal; <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 条件不是一个等量关系，称为非等值连接。<br></code></pre></td></tr></table></figure><h3 id="6-3-内连接之自己连接"><a href="#6-3-内连接之自己连接" class="headerlink" title="6.3 内连接之自己连接"></a>6.3 内连接之自己连接</h3><p><strong>查询员工的上级领导，要求显示员工名和对应的领导名？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">技巧：一张表看成两张表。<br><span class="hljs-keyword">select</span> <br>	a.ename <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;员工名&#x27;</span>, b.ename <span class="hljs-keyword">as</span> <span class="hljs-string">&#x27;领导名&#x27;</span><br><span class="hljs-keyword">from</span><br>	emp a<br><span class="hljs-keyword">join</span><br>	emp b<br><span class="hljs-keyword">on</span><br>	a.mgr <span class="hljs-operator">=</span> b.empno; <span class="hljs-operator">/</span><span class="hljs-operator">/</span>员工的领导编号 <span class="hljs-operator">=</span> 领导的员工编号<br></code></pre></td></tr></table></figure><h3 id="6-4-外连接"><a href="#6-4-外连接" class="headerlink" title="6.4 外连接"></a>6.4 外连接</h3><ul><li><p>内连接：（A和B连接，AB两张表没有主次关系。平等的。）</p></li><li><p>内连接的特点：完成能够匹配上ON后面的条件的数据查询出来。</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">outer</span>是可以省略的，带着可读性强。<br><span class="hljs-keyword">select</span> <br>	e.ename,d.dname<br><span class="hljs-keyword">from</span><br>	emp e <br><span class="hljs-keyword">right</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> <br>	dept d<br><span class="hljs-keyword">on</span><br>	e.deptno <span class="hljs-operator">=</span> d.deptno;<br></code></pre></td></tr></table></figure><ul><li>right代表什么：表示将join关键字右边的这张表看成主表，主要是为了将这张表的数据全部查询出来，捎带着关联查询左边的表。</li><li><strong>在外连接当中，两张表连接，产生了主次关系。</strong></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <br>	e.ename,d.dname<br><span class="hljs-keyword">from</span><br>	dept d <br><span class="hljs-keyword">left</span> <span class="hljs-keyword">outer</span> <span class="hljs-keyword">join</span> <br>	emp e<br><span class="hljs-keyword">on</span><br>	e.deptno <span class="hljs-operator">=</span> d.deptno;<br><br>带有<span class="hljs-keyword">right</span>的是右外连接，又叫做右连接。<br>带有<span class="hljs-keyword">left</span>的是左外连接，又叫做左连接。<br>任何一个右连接都有左连接的写法。<br>任何一个左连接都有右连接的写法。<br></code></pre></td></tr></table></figure><h3 id="6-5-多表连接"><a href="#6-5-多表连接" class="headerlink" title="6.5 多表连接"></a>6.5 多表连接</h3><p><strong>三张表，四张表怎么连接？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs sql">语法：<br>	<span class="hljs-keyword">select</span> <br>		...<br>	<span class="hljs-keyword">from</span><br>		a<br>	<span class="hljs-keyword">join</span><br>		b<br>	<span class="hljs-keyword">on</span><br>		a和b的连接条件<br>	<span class="hljs-keyword">join</span><br>		c<br>	<span class="hljs-keyword">on</span><br>		a和c的连接条件<br>	<span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span><br>		d<br>	<span class="hljs-keyword">on</span><br>		a和d的连接条件<br></code></pre></td></tr></table></figure><p><strong>找出每个员工的部门名称以及工资等级，要求显示员工名、部门名、薪资、薪资等级？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <br>	e.ename,e.sal,d.dname,s.grade<br><span class="hljs-keyword">from</span><br>	emp e<br><span class="hljs-keyword">join</span><br>	dept d<br><span class="hljs-keyword">on</span> <br>	e.deptno <span class="hljs-operator">=</span> d.deptno<br><span class="hljs-keyword">join</span><br>	salgrade s<br><span class="hljs-keyword">on</span><br>	e.sal <span class="hljs-keyword">between</span> s.losal <span class="hljs-keyword">and</span> s.hisal;  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 通过薪资所在salgrade表的范围确定薪资等级<br></code></pre></td></tr></table></figure><p><strong>找出每个员工的部门名称以及工资等级，还有上级领导，要求显示员工名、领导名、部门名、薪资、薪资等级？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <br>	e.ename,e.sal,d.dname,s.grade,l.ename<br><span class="hljs-keyword">from</span><br>	emp e<br><span class="hljs-keyword">join</span><br>	dept d<br><span class="hljs-keyword">on</span> <br>	e.deptno <span class="hljs-operator">=</span> d.deptno<br><span class="hljs-keyword">join</span><br>	salgrade s<br><span class="hljs-keyword">on</span><br>	e.sal <span class="hljs-keyword">between</span> s.losal <span class="hljs-keyword">and</span> s.hisal<br><span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span><br>	emp l<br><span class="hljs-keyword">on</span><br>	e.mgr <span class="hljs-operator">=</span> l.empno;<br></code></pre></td></tr></table></figure><h2 id="7-子查询"><a href="#7-子查询" class="headerlink" title="7. 子查询"></a>7. 子查询</h2><ul><li><p>select 语句中嵌套 select 语句，被嵌套的 select 语句称为子查询。</p></li><li><p>子查询可以出现在 select 后面，from 后面，where 后面。</p></li></ul><h3 id="7-1-where-子句中的子查询"><a href="#7-1-where-子句中的子查询" class="headerlink" title="7.1 where 子句中的子查询"></a>7.1 where 子句中的子查询</h3><p><strong>找出比最低工资高的员工姓名和工资？</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> ename,sal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(sal) <span class="hljs-keyword">from</span> emp);<br></code></pre></td></tr></table></figure><h3 id="7-2-from-子句中的子查询"><a href="#7-2-from-子句中的子查询" class="headerlink" title="7.2 from 子句中的子查询"></a>7.2 from 子句中的子查询</h3><ul><li>from 后面的子查询，可以将子查询的查询结果当做一张临时表。（技巧）</li></ul><p><strong>找出每个岗位的平均工资的薪资等级。</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <br>	t.<span class="hljs-operator">*</span>, s.grade<br><span class="hljs-keyword">from</span><br>	(<span class="hljs-keyword">select</span> job,<span class="hljs-built_in">avg</span>(sal) <span class="hljs-keyword">as</span> avgsal <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> job) t<br><span class="hljs-keyword">join</span><br>	salgrade s<br><span class="hljs-keyword">on</span><br>	t.avgsal <span class="hljs-keyword">between</span> s.losal <span class="hljs-keyword">and</span> s.hisal;<br></code></pre></td></tr></table></figure><h2 id="8-约束"><a href="#8-约束" class="headerlink" title="8. 约束"></a>8. 约束</h2><ul><li>在创建表的时候，我们可以给表中的字段加上一些约束，来保证这个表中数据的完整性、有效性！！！</li></ul><h3 id="8-1-约束类型"><a href="#8-1-约束类型" class="headerlink" title="8.1 约束类型"></a>8.1 约束类型</h3><ul><li>非空约束：not null</li><li>唯一性约束：unique</li><li>主键约束：primary key （简称PK）</li><li>外键约束：foreign key（简称FK）</li><li>检查约束：check（mysql不支持，oracle支持）</li></ul><p>重点学习四个约束：<strong>not null，unique，primary key，foreign key。</strong></p><h3 id="8-2-not-null"><a href="#8-2-not-null" class="headerlink" title="8.2 not null"></a>8.2 not null</h3><ul><li>非空约束 not null 约束的字段不能为 NULL。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>    id <span class="hljs-type">int</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> 只有列级约束，没有表级约束！<br>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id, name) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id) <span class="hljs-keyword">values</span>(<span class="hljs-number">3</span>);<br>	ERROR <span class="hljs-number">1364</span> (HY000): Field <span class="hljs-string">&#x27;name&#x27;</span> doesn<span class="hljs-string">&#x27;t have a default value</span><br></code></pre></td></tr></table></figure><h3 id="8-3-unique"><a href="#8-3-unique" class="headerlink" title="8.3 unique"></a>8.3 unique</h3><ul><li>唯一性约束 unique 约束的字段不能重复，但是<strong>可以为NULL</strong>。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>	id <span class="hljs-type">int</span>,<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">unique</span>,<br>	email <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)<br>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;lisi&#x27;</span>,<span class="hljs-string">&#x27;lisi@123.com&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;wangwu&#x27;</span>,<span class="hljs-string">&#x27;wangwu@123.com&#x27;</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_vip;<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;wangwu&#x27;</span>,<span class="hljs-string">&#x27;wangwu@sina.com&#x27;</span>);<br>ERROR <span class="hljs-number">1062</span> (<span class="hljs-number">23000</span>): Duplicate entry <span class="hljs-string">&#x27;wangwu&#x27;</span> <span class="hljs-keyword">for</span> key <span class="hljs-string">&#x27;name&#x27;</span><br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id) <span class="hljs-keyword">values</span>(<span class="hljs-number">4</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id) <span class="hljs-keyword">values</span>(<span class="hljs-number">5</span>);<br><span class="hljs-operator">+</span><span class="hljs-comment">------+----------+------------------+</span><br><span class="hljs-operator">|</span> id   <span class="hljs-operator">|</span> name     <span class="hljs-operator">|</span> email            <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+----------+------------------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span> zhangsan <span class="hljs-operator">|</span> zhangsan<span class="hljs-variable">@123</span>.com <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span> lisi     <span class="hljs-operator">|</span> lisi<span class="hljs-variable">@123</span>.com     <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">3</span> <span class="hljs-operator">|</span> wangwu   <span class="hljs-operator">|</span> wangwu<span class="hljs-variable">@123</span>.com   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">4</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>     <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>             <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">5</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>     <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>             <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+----------+------------------+</span><br>name字段虽然被<span class="hljs-keyword">unique</span>约束了，但是可以为<span class="hljs-keyword">NULL</span>。<br></code></pre></td></tr></table></figure><h4 id="8-3-1-联合唯一"><a href="#8-3-1-联合唯一" class="headerlink" title="8.3.1 联合唯一"></a>8.3.1 联合唯一</h4><ul><li>name 和 email 两个字段联合起来具有唯一性！！！！</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>	id <span class="hljs-type">int</span>,<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>	email <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>	<span class="hljs-keyword">unique</span>(name,email) <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 约束没有添加在列的后面，这种约束被称为表级约束。<br>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-string">&#x27;zhangsan@123.com&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-string">&#x27;zhangsan@sina.com&#x27;</span>);<br>	name 和 email两个字段联合起来唯一！！！<br>	<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-string">&#x27;zhangsan@sina.com&#x27;</span>);<br>	ERROR <span class="hljs-number">1062</span> (<span class="hljs-number">23000</span>): Duplicate entry <span class="hljs-string">&#x27;zhangsan-zhangsan@sina.com&#x27;</span> <span class="hljs-keyword">for</span> key <span class="hljs-string">&#x27;name&#x27;</span><br></code></pre></td></tr></table></figure><ul><li>在 mysql 当中，如果一个字段同时被 not null 和 unique 约束的话，该字段自动变成主键字段。（注意：oracle中不一样！）</li></ul><h3 id="8-4-primary-key"><a href="#8-4-primary-key" class="headerlink" title="8.4 primary key"></a>8.4 primary key</h3><ul><li><p>主键值是每一行记录的唯一标识。主键值是每一行记录的身份证号！！！</p></li><li><p>主键的特征：not null + unique（主键值不能是NULL，同时也不能重复！）</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br>		<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> <span class="hljs-number">1</span>个字段做主键，叫做：单一主键<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>,  <span class="hljs-operator">/</span><span class="hljs-operator">/</span>列级约束<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>    <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>(id)  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 表级约束<br>);<br>	<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name) <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;lisi&#x27;</span>);<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>错误：不能重复<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name) <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;wangwu&#x27;</span>);<br>ERROR <span class="hljs-number">1062</span> (<span class="hljs-number">23000</span>): Duplicate entry <span class="hljs-string">&#x27;2&#x27;</span> <span class="hljs-keyword">for</span> key <span class="hljs-string">&#x27;PRIMARY&#x27;</span><br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>错误：不能为<span class="hljs-keyword">NULL</span><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhaoliu&#x27;</span>);<br>ERROR <span class="hljs-number">1364</span> (HY000): Field <span class="hljs-string">&#x27;id&#x27;</span> doesn<span class="hljs-string">&#x27;t have a default value</span><br></code></pre></td></tr></table></figure><h4 id="8-4-1-复合主键"><a href="#8-4-1-复合主键" class="headerlink" title="8.4.1 复合主键"></a>8.4.1 复合主键</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> id和name联合起来做主键：复合主键！！！！<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>    id <span class="hljs-type">int</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>    email <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>    <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>(id,name)<br>);<br>        <br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;zhangsan&#x27;</span>,<span class="hljs-string">&#x27;zhangsan@123.com&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;lisi&#x27;</span>,<span class="hljs-string">&#x27;lisi@123.com&#x27;</span>);<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span>错误：不能重复<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(id,name,email) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;lisi&#x27;</span>,<span class="hljs-string">&#x27;lisi@123.com&#x27;</span>);<br>	ERROR <span class="hljs-number">1062</span> (<span class="hljs-number">23000</span>): Duplicate entry <span class="hljs-string">&#x27;1-lisi&#x27;</span> <span class="hljs-keyword">for</span> key <span class="hljs-string">&#x27;PRIMARY&#x27;</span><br></code></pre></td></tr></table></figure><ul><li>在实际开发中不建议使用：复合主键。建议使用单一主键！</li><li>因为主键值存在的意义就是这行记录的身份证号，只要意义达到即可，单一主键可以做到。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">一个表中主键约束能加两个吗？<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>,<br>    name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span><br>);<br>	ERROR <span class="hljs-number">1068</span> (<span class="hljs-number">42000</span>): Multiple <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span> defined<br></code></pre></td></tr></table></figure><ul><li>结论：一张表，主键约束只能添加1个。（主键只能有1个。）</li></ul><p><strong>主键分类</strong></p><ul><li><p>自然主键：主键值是一个自然数，和业务没关系。</p></li><li><p>业务主键：主键值和业务紧密关联，例如拿银行卡账号做主键值。这就是业务主键！</p></li></ul><h4 id="8-4-2-主键自增"><a href="#8-4-2-主键自增" class="headerlink" title="8.4.2 主键自增"></a>8.4.2 主键自增</h4><ul><li>在mysql当中，有一种机制，可以帮助我们自动维护一个主键值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql">rop <span class="hljs-keyword">table</span> if <span class="hljs-keyword">exists</span> t_vip;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_vip(<br>	id <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span> auto_increment, <span class="hljs-operator">/</span><span class="hljs-operator">/</span>auto_increment表示自增，从<span class="hljs-number">1</span>开始，以<span class="hljs-number">1</span>递增！<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)<br>);<br>		<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br>		<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br>		<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br>		<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br>		<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br>		<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_vip(name) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br>		<br>		<span class="hljs-operator">+</span><span class="hljs-comment">----+----------+</span><br>		<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> name     <span class="hljs-operator">|</span><br>		<span class="hljs-operator">+</span><span class="hljs-comment">----+----------+</span><br>		<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> zhangsan <span class="hljs-operator">|</span><br>		<span class="hljs-operator">|</span>  <span class="hljs-number">2</span> <span class="hljs-operator">|</span> zhangsan <span class="hljs-operator">|</span><br>		<span class="hljs-operator">|</span>  <span class="hljs-number">3</span> <span class="hljs-operator">|</span> zhangsan <span class="hljs-operator">|</span><br>		<span class="hljs-operator">|</span>  <span class="hljs-number">4</span> <span class="hljs-operator">|</span> zhangsan <span class="hljs-operator">|</span><br>		<span class="hljs-operator">|</span>  <span class="hljs-number">5</span> <span class="hljs-operator">|</span> zhangsan <span class="hljs-operator">|</span><br></code></pre></td></tr></table></figure><h3 id="8-5-foreign-key"><a href="#8-5-foreign-key" class="headerlink" title="8.5 foreign key"></a>8.5 foreign key</h3><ul><li>如果一个实体的某个字段指向另一个实体的主键，就称为外键</li><li>被指向的实体，称之为主实体（主表），也叫父实体（父表）。</li><li>负责指向的实体，称之为从实体（从表），也叫子实体（子表）</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_class(<br>	classno <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>,<br>	classname <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)<br>);<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_student(<br>	<span class="hljs-keyword">no</span> <span class="hljs-type">int</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span> auto_increment,<br>	name <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>),<br>	cno <span class="hljs-type">int</span>,<br>	<span class="hljs-keyword">foreign</span> <span class="hljs-keyword">key</span>(cno) <span class="hljs-keyword">references</span> t_class(classno)<br>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_class(classno, classname) <span class="hljs-keyword">values</span>(<span class="hljs-number">100</span>, <span class="hljs-string">&#x27;北京市大兴区亦庄镇第二中学高三1班&#x27;</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_class(classno, classname) <span class="hljs-keyword">values</span>(<span class="hljs-number">101</span>, <span class="hljs-string">&#x27;北京市大兴区亦庄镇第二中学高三1班&#x27;</span>);<br><br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(name,cno) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(name,cno) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;lilei&#x27;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(name,cno) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;hanmeimei&#x27;</span>, <span class="hljs-number">100</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(name,cno) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>, <span class="hljs-number">101</span>);<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_student(name,cno) <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;lisi&#x27;</span>, <span class="hljs-number">101</span>);<br></code></pre></td></tr></table></figure><ul><li>外键可以为空，可以理解成 一名学生肯定会关联到一个存在的班级，但来了一个转校生，还没有分班，他现在属于学生子表，但还没有关联到班级主表中的任何一条记录。</li></ul><p>t_class是父表，t_student是子表</p><p>​ <strong>删除表</strong>的顺序？ 先删子，再删父。</p><p>​ <strong>创建表</strong>的顺序？ 先创建父，再创建子。</p><p>​ <strong>删除数据</strong>的顺序？先删子，再删父。</p><p>​ <strong>插入数据</strong>的顺序？先插入父，再插入子</p><ul><li>子表中的外键引用的父表中的某个字段，被引用的这个字段不一定是主键，但至少具有unique约束。</li></ul><h2 id="9-存储引擎"><a href="#9-存储引擎" class="headerlink" title="9. 存储引擎"></a>9. 存储引擎</h2><ul><li>存储引擎是MySQL中特有的一个术语，其它数据库中没有。（Oracle中有，但是不叫这个名字）</li><li>实际上存储引擎是一个表存储/组织数据的方式。</li><li>不同的存储引擎，表存储数据的方式不同。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t_student;<br>可以在建表的时候给表指定存储引擎。<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t_student` (<br>  `<span class="hljs-keyword">no</span>` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `cno` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (`<span class="hljs-keyword">no</span>`),<br>  KEY `cno` (`cno`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `t_student_ibfk_1` <span class="hljs-keyword">FOREIGN</span> <span class="hljs-keyword">KEY</span> (`cno`) <span class="hljs-keyword">REFERENCES</span> `t_class` (`classno`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">11</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8<br></code></pre></td></tr></table></figure><p>在建表的时候可以在最后小括号的”)”的右边使用：</p><ul><li>ENGINE 来指定存储引擎。 mysql默认的存储引擎是：<strong>InnoDB</strong></li><li>CHARSET 来指定这张表的字符编码方式。mysql默认的字符编码方式是：<strong>utf8</strong></li></ul><h3 id="9-1-mysql-支持的存储引擎"><a href="#9-1-mysql-支持的存储引擎" class="headerlink" title="9.1 mysql 支持的存储引擎"></a>9.1 mysql 支持的存储引擎</h3><ul><li>show engines \G 查看mysql支持哪些存储引擎</li><li>mysql 支持九大存储引擎，当前5.5.36支持8个。版本不同支持情况不同。</li></ul><p><img src="https://cdn.jsdelivr.net/gh/stuxiaozhang/blogimage/img/20220418201608.png" srcset="/img/loading.gif" lazyload alt=""></p><h3 id="9-2-MyISAM存储引擎"><a href="#9-2-MyISAM存储引擎" class="headerlink" title="9.2 MyISAM存储引擎"></a>9.2 MyISAM存储引擎</h3><ul><li><p>使用三个文件表示每个表：</p><ul><li>格式文件 — 存储表结构的定义（mytable.frm）</li><li>数据文件 — 存储表行的内容（mytable.MYD）</li><li>索引文件 — 存储表上索引（mytable.MYI）：索引是一本书的目录，缩小扫描范围，提高查询效率的一种机制。</li></ul></li><li><p>可被转换为压缩、只读表来节省空间</p></li><li>MyISAM存储引擎特点：<ul><li>可被转换为压缩、只读表来节省空间这是这种存储引擎的优势！！！！</li><li>MyISAM不支持事务机制，安全性低。</li></ul></li></ul><h3 id="9-3-InnoDB存储引擎"><a href="#9-3-InnoDB存储引擎" class="headerlink" title="9.3 InnoDB存储引擎"></a>9.3 InnoDB存储引擎</h3><ul><li>这是mysql默认的存储引擎，同时也是一个重量级的存储引擎。</li><li>InnoDB支持事务，支持数据库崩溃后自动恢复机制。</li><li><p>InnoDB存储引擎最主要的特点是：非常安全。</p></li><li><p>它管理的表具有下列主要特征：</p><ul><li>每个 InnoDB 表在数据库目录中以.frm 格式文件表示</li><li>InnoDB 表空间 tablespace 被用于存储表的内容（表空间是一个逻辑名称。表空间存储数据+索引。）</li><li>提供一组用来记录事务性活动的日志文件</li><li>用 COMMIT(提交)、SAVEPOINT 及ROLLBACK(回滚)支持事务处理</li><li>提供全 ACID 兼容</li><li>在 MySQL 服务器崩溃后提供自动恢复</li><li>多版本（MVCC）和行级锁定</li><li>支持外键及引用的完整性，包括级联删除和更新</li></ul></li><li>InnoDB最大的特点就是支持事务：以保证数据的安全。效率不是很高，并且也不能压缩，不能转换为只读，</li><li>不能很好的节省存储空间。</li></ul><h3 id="9-4-MEMORY存储引擎"><a href="#9-4-MEMORY存储引擎" class="headerlink" title="9.4 MEMORY存储引擎"></a>9.4 MEMORY存储引擎</h3><ul><li><p>使用 MEMORY 存储引擎的表，其数据存储在内存中，且行的长度固定，这两个特点使得 MEMORY 存储引擎非常<strong>快</strong>。</p></li><li><p>MEMORY 存储引擎管理的表具有下列特征：</p><ul><li>在数据库目录内，每个表均以.frm 格式的文件表示。</li><li>表数据及索引被存储在内存中。（目的就是快，查询快！）</li><li>表级锁机制。</li><li>不能包含 TEXT 或 BLOB 字段。</li></ul></li><li><p>MEMORY 存储引擎以前被称为HEAP 引擎。</p></li><li>MEMORY引擎优点：查询效率是最高的。不需要和硬盘交互。</li><li>MEMORY引擎缺点：不安全，关机之后数据消失。因为数据和索引都是在内存当中。</li></ul><h2 id="10-事务"><a href="#10-事务" class="headerlink" title="10.事务"></a>10.事务</h2><ul><li><p>一个事务其实就是一个完整的业务逻辑。是一个最小的工作单元。不可再分。</p></li><li><p>什么是一个完整的业务逻辑？</p><pre><code>假设转账，从A账户向B账户中转账10000.
      将A账户的钱减去10000（update语句）
      将B账户的钱加上10000（update语句）
      这就是一个完整的业务逻辑。
</code></pre></li><li>以上的操作是一个最小的工作单元，要么同时成功，要么同时失败，不可再分。这两个update语句要求必须同时成功或者同时失败，这样才能保证钱是正确的。</li><li>insert delete update 只有以上的三个语句和事务有关系，其它都没有关系。</li><li>事务：就是<strong>批量的DML语句同时成功，或者同时失败！</strong></li></ul><h3 id="10-1-InnoDB-实现事务"><a href="#10-1-InnoDB-实现事务" class="headerlink" title="10.1 InnoDB 实现事务"></a>10.1 InnoDB 实现事务</h3><ul><li><p>InnoDB 存储引擎：提供一组用来记录事务性活动的日志文件</p></li><li><p>在事务的执行过程中，每一条DML的操作都会记录到“事务性活动的日志文件”中。</p></li><li><p>在事务的执行过程中，<strong>我们可以提交事务，也可以回滚事务。</strong></p></li><li><p>提交事务 <strong>commit</strong>; 语句</p><ul><li>清空事务性活动的日志文件，将数据全部彻底持久化到数据库表中。</li><li>提交事务标志着，事务的结束。并且是一种全部成功的结束。</li></ul></li><li><p>回滚事务 <strong>rollback</strong>; 语句（回滚永远都是只能回滚到上一次的<strong>提交点</strong>！）</p><ul><li>将之前所有的DML操作全部撤销，并且清空事务性活动的日志文件</li><li>回滚事务标志着，事务的结束。并且是一种全部失败的结束。</li></ul></li><li><p>将mysql的自动提交机制<strong>关闭</strong>掉 start transaction;</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs sql">事务回滚<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept_bak;<br>	<span class="hljs-keyword">Empty</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">start</span> transaction;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept_bak <span class="hljs-keyword">values</span>(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-string">&#x27;tj&#x27;</span>);<br>Query OK, <span class="hljs-number">1</span> <span class="hljs-type">row</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept_bak <span class="hljs-keyword">values</span>(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-string">&#x27;tj&#x27;</span>);<br>Query OK, <span class="hljs-number">1</span> <span class="hljs-type">row</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept_bak;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+-------+------+</span><br><span class="hljs-operator">|</span> DEPTNO <span class="hljs-operator">|</span> DNAME <span class="hljs-operator">|</span> LOC  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+-------+------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">10</span> <span class="hljs-operator">|</span> abc   <span class="hljs-operator">|</span> tj   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">10</span> <span class="hljs-operator">|</span> abc   <span class="hljs-operator">|</span> tj   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+-------+------+</span><br><span class="hljs-number">2</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">rollback</span>;<br>Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)<br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept_bak;<br><span class="hljs-keyword">Empty</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></table></figure><h3 id="10-2-事物的四个特性-ACID"><a href="#10-2-事物的四个特性-ACID" class="headerlink" title="10.2 事物的四个特性 ACID"></a>10.2 事物的四个特性 ACID</h3><p><strong>A：原子性</strong><br>说明事务是最小的工作单元。不可再分。</p><p><strong>C：一致性</strong><br>所有事务要求，在同一个事务当中，所有操作必须同时成功，或者同时失败，以保证数据的一致性。</p><p><strong>I：隔离性</strong><br>A事务和B事务之间具有一定的隔离。<br>教室A和教室B之间有一道墙，这道墙就是隔离性。<br>A事务在操作一张表的时候，另一个事务B也操作这张表会那样？？？</p><p><strong>D：持久性</strong><br>事务最终结束的一个保障。事务提交，就相当于将没有保存到硬盘上的数据<br>保存到硬盘上！</p><h3 id="10-3-事务的隔离性"><a href="#10-3-事务的隔离性" class="headerlink" title="10.3 事务的隔离性"></a>10.3 事务的隔离性</h3><h4 id="10-3-1-事务和事务之间四个隔离级别"><a href="#10-3-1-事务和事务之间四个隔离级别" class="headerlink" title="10.3.1 事务和事务之间四个隔离级别"></a>10.3.1 事务和事务之间四个隔离级别</h4><p><strong>读未提交：read uncommitted（最低的隔离级别）《没有提交就读到了》</strong></p><ul><li>事务A可以读取到事务B未提交的数据。</li><li>这种隔离级别存在的问题就是：<strong>脏读现象</strong>！(Dirty Read)我们称读到了脏数据。</li><li>这种隔离级别一般都是理论上的，大多数的数据库隔离级别都是二档起步！</li></ul><p><strong>读已提交：read committed《提交之后才能读到》</strong></p><ul><li>事务A只能读取到事务B提交之后的数据。</li><li>这种隔离级别解决了解决了脏读的现象。</li><li>这种隔离级别不可重复读取数据。<ul><li>在事务开启之后，第一次读到的数据是3条，当前事务还没有结束，可能第二次再读取的时候，读到的数据是4条，3不等于4称为不可重复读取。</li></ul></li><li>这种隔离级别是比较真实的数据，每一次读到的数据是绝对的真实。</li><li>oracle数据库默认的隔离级别是：read committed</li></ul><p><strong>可重复读：repeatable read《提交之后也读不到，永远读取的都是刚开启事务时的数据》</strong></p><ul><li>事务A开启之后，不管是多久，每一次在事务A中读取到的数据都是一致的。即使事务B将数据已经修改，并且提交了，事务A读取到的数据还是没有发生改变，这就是可重复读。</li><li>可重复读可能会出现幻影读。每一次读取到的数据都是幻象。不够真实！</li><li><p>早晨9点开始开启了事务，只要事务不结束，到晚上9点，读到的数据还是那样！读到的是假象。不够绝对的真实。</p></li><li><p>mysql中默认的事务隔离级别就是这个！！！！！！！！！！！</p></li></ul><p><strong>序列化/串行化：serializable（最高的隔离级别）</strong></p><ul><li>这是最高隔离级别，效率最低。解决了所有的问题。</li><li>这种隔离级别表示事务排队，不能并发！</li><li>synchronized，线程同步（事务同步）每一次读取到的数据都是最真实的，并且效率是最低的。</li></ul><h4 id="10-3-2-验证各种隔离级别"><a href="#10-3-2-验证各种隔离级别" class="headerlink" title="10.3.2 验证各种隔离级别"></a>10.3.2 验证各种隔离级别</h4><ul><li>mysql 5 查看隔离级别：SELECT @@tx_isolation</li><li>mysql 8 查看隔离级别：select @@transaction_isolation;</li></ul><p><strong>验证：read uncommited</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> transaction isolation level read uncommitted;<br>事务A													事务B<br><span class="hljs-comment">--------------------------------------------------------------------------------</span><br>use bjpowernode;<br>													use bjpowernode;<br><span class="hljs-keyword">start</span> transaction;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br>													<span class="hljs-keyword">start</span> transaction;<br>													<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br></code></pre></td></tr></table></figure><p><strong>验证：read commited</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> transaction isolation level read committed;<br>事务A													事务B<br><span class="hljs-comment">--------------------------------------------------------------------------------</span><br>use bjpowernode;<br>													use bjpowernode;<br><span class="hljs-keyword">start</span> transaction;<br>													<span class="hljs-keyword">start</span> transaction;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br>													<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;zhangsan&#x27;</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br>													<span class="hljs-keyword">commit</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br></code></pre></td></tr></table></figure><p><strong>验证：repeatable read</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> transaction isolation level repeatable read;<br>事务A													事务B<br><span class="hljs-comment">--------------------------------------------------------------------------------</span><br>use bjpowernode;<br>													use bjpowernode;<br><span class="hljs-keyword">start</span> transaction;<br>													<span class="hljs-keyword">start</span> transaction;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br>													<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;lisi&#x27;</span>);<br>													<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;wangwu&#x27;</span>);<br>													<span class="hljs-keyword">commit</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br></code></pre></td></tr></table></figure><p><strong>验证：serializable</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> transaction isolation level serializable;<br>事务A													事务B<br><span class="hljs-comment">--------------------------------------------------------------------------------</span><br>use bjpowernode;<br>													use bjpowernode;<br><span class="hljs-keyword">start</span> transaction;<br>													<span class="hljs-keyword">start</span> transaction;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> t_user;<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t_user <span class="hljs-keyword">values</span>(<span class="hljs-string">&#x27;abc&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="11-索引"><a href="#11-索引" class="headerlink" title="11. 索引"></a>11. 索引</h2><ul><li>索引是在数据库表的字段上添加的，是为了提高查询效率存在的一种机制。</li><li>一张表的一个字段可以添加一个索引，当然，多个字段联合起来也可以添加索引。</li><li><p>索引相当于一本书的目录，是为了缩小扫描范围而存在的一种机制。</p></li><li><p>MySQL在查询方面主要就是两种方式：全表扫描 ；根据索引检索。</p></li><li><p>在mysql数据库当中索引也是需要排序的，并且这个所以的排序和TreeSet</p></li><li><strong>数据结构相同。TreeSet（TreeMap）底层是一个自平衡的二叉树！在mysql当中索引是一个B-Tree数据结构。</strong></li><li><strong>遵循左小又大原则存放。采用中序遍历方式遍历取数据。</strong></li></ul><p><strong>索引的实现原理？</strong></p><p><img src="https://cdn.jsdelivr.net/gh/stuxiaozhang/blogimage/img/20220418204148.png" srcset="/img/loading.gif" lazyload style="zoom:90%"></p><ul><li>提醒1：在任何数据库当中主键上都会自动添加索引对象，id字段上自动有索引，因为id是PK。另外在mysql当中，一个字段上如果有unique约束的话，也会自动创建索引对象</li><li>提醒2：在任何数据库当中，任何一张表的任何一条记录在硬盘存储上都有一个硬盘的物理存储编号。</li><li>提醒3：在mysql当中，索引是一个单独的对象，不同的存储引擎以不同的形式存在，在MyISAM存储引擎中，索引存储在一个.MYI文件中。在InnoDB存储引擎中索引存储在一个逻辑名称叫做tablespace的当中。在MEMORY存储引擎当中索引被存储在内存当中。不管索引存储在哪里，索引在mysql当中都是一个树的形式</li></ul><p><strong>什么条件下，我们会考虑给字段添加索引呢？</strong></p><ol><li>数据量庞大（到底有多么庞大算庞大，这个需要测试，因为每一个硬件环境不同）</li><li>该字段经常出现在where的后面，以条件的形式存在，也就是说这个字段总是被扫描。</li><li>该字段很少的DML(insert delete update)操作。（因为DML之后，索引需要重新排序。）</li></ol><ul><li>建议不要随意添加索引，因为索引也是需要维护的，太多的话反而会降低系统的性能。</li><li>建议通过主键查询，建议通过unique约束的字段进行查询，效率是比较高的。</li></ul><h3 id="11-1-索引的创建和删除"><a href="#11-1-索引的创建和删除" class="headerlink" title="11.1 索引的创建和删除"></a>11.1 索引的创建和删除</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql">创建索引：<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">create</span> index emp_ename_index <span class="hljs-keyword">on</span> emp(ename);<br>	给emp表的ename字段添加索引，起名：emp_ename_index<br><br>删除索引：<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">drop</span> index emp_ename_index <span class="hljs-keyword">on</span> emp;<br>	将emp表上的emp_ename_index索引对象删除。<br>	<br>	查看一个<span class="hljs-keyword">SQL</span>语句是否使用了索引进行检索？<br>	mysql<span class="hljs-operator">&gt;</span> explain <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;KING&#x27;</span>;<br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br>	<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys <span class="hljs-operator">|</span> key  <span class="hljs-operator">|</span> key_len <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+-</span><br>	<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE      <span class="hljs-operator">|</span> emp   <span class="hljs-operator">|</span> <span class="hljs-keyword">ALL</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>          <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>    <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br>	扫描<span class="hljs-number">14</span>条记录：说明没有使用索引。type<span class="hljs-operator">=</span><span class="hljs-keyword">ALL</span><br><br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">create</span> index emp_ename_index <span class="hljs-keyword">on</span> emp(ename);<br><br>	mysql<span class="hljs-operator">&gt;</span> explain <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;KING&#x27;</span>;<br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-----------------+-----------------</span><br>	<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys   <span class="hljs-operator">|</span> key             <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-----------------+-----------------</span><br>	<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE      <span class="hljs-operator">|</span> emp   <span class="hljs-operator">|</span> <span class="hljs-keyword">ref</span>  <span class="hljs-operator">|</span> emp_ename_index <span class="hljs-operator">|</span> emp_ename_index <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-----------------+-----------------</span><br></code></pre></td></tr></table></figure><h3 id="11-2-索引失效"><a href="#11-2-索引失效" class="headerlink" title="11.2 索引失效"></a>11.2 索引失效</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs sql">失效的第<span class="hljs-number">1</span>种情况：<br>	<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%T&#x27;</span>;<br>	ename上即使添加了索引，也不会走索引，为什么？<br>		原因是因为模糊匹配当中以“<span class="hljs-operator">%</span>”开头了！<br>		尽量避免模糊查询的时候以“<span class="hljs-operator">%</span>”开始。<br>		这是一种优化的手段<span class="hljs-operator">/</span>策略。<br>	myql<span class="hljs-operator">&gt;</span> explain <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%T&#x27;</span>;<br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br>	<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys <span class="hljs-operator">|</span> key  <span class="hljs-operator">|</span> key_len <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br>	<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE      <span class="hljs-operator">|</span> emp   <span class="hljs-operator">|</span> <span class="hljs-keyword">ALL</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>          <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>    <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br><br>失效的第<span class="hljs-number">2</span>种情况：<br>	使用<span class="hljs-keyword">or</span>的时候会失效，如果使用<span class="hljs-keyword">or</span>那么要求<span class="hljs-keyword">or</span>两边的条件字段都要有<br>	索引，才会走索引，如果其中一边有一个字段没有索引，那么另一个<br>	字段上的索引也会实现。所以这就是为什么不建议使用<span class="hljs-keyword">or</span>的原因。<br><br>	mysql<span class="hljs-operator">&gt;</span> explain <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> ename <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;KING&#x27;</span> <span class="hljs-keyword">or</span> job <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;MANAGER&#x27;</span>;<br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-----------------+------+---------</span><br>	<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys   <span class="hljs-operator">|</span> key  <span class="hljs-operator">|</span> key_len <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-----------------+------+---------</span><br>	<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE      <span class="hljs-operator">|</span> emp   <span class="hljs-operator">|</span> <span class="hljs-keyword">ALL</span>  <span class="hljs-operator">|</span> emp_ename_index <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>    <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-----------------+------+---------</span><br><br>失效的第<span class="hljs-number">3</span>种情况：<br>	使用复合索引的时候，没有使用左侧的列查找，索引失效<br>	什么是复合索引？<br>		两个字段，或者更多的字段联合起来添加一个索引，叫做复合索引。<br>	<br>	<span class="hljs-keyword">create</span> index emp_job_sal_index <span class="hljs-keyword">on</span> emp(job,sal);<br>	<br>	mysql<span class="hljs-operator">&gt;</span> explain <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> job <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;MANAGER&#x27;</span>;<br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-------------------+---------------</span><br>	<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys     <span class="hljs-operator">|</span> key           <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-------------------+---------------</span><br>	<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE      <span class="hljs-operator">|</span> emp   <span class="hljs-operator">|</span> <span class="hljs-keyword">ref</span>  <span class="hljs-operator">|</span> emp_job_sal_index <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+-------------------+---------------</span><br>	<br>	mysql<span class="hljs-operator">&gt;</span> explain <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> sal <span class="hljs-operator">=</span> <span class="hljs-number">800</span>;<br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br>	<span class="hljs-operator">|</span> id <span class="hljs-operator">|</span> select_type <span class="hljs-operator">|</span> <span class="hljs-keyword">table</span> <span class="hljs-operator">|</span> type <span class="hljs-operator">|</span> possible_keys <span class="hljs-operator">|</span> key  <span class="hljs-operator">|</span> key_len <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br>	<span class="hljs-operator">|</span>  <span class="hljs-number">1</span> <span class="hljs-operator">|</span> SIMPLE      <span class="hljs-operator">|</span> emp   <span class="hljs-operator">|</span> <span class="hljs-keyword">ALL</span>  <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>          <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>    <span class="hljs-operator">|</span> <br>	<span class="hljs-operator">+</span><span class="hljs-comment">----+-------------+-------+------+---------------+------+---------+--</span><br></code></pre></td></tr></table></figure><h2 id="12-视图"><a href="#12-视图" class="headerlink" title="12. 视图"></a>12. 视图</h2><ul><li>视图view：站在不同的角度去看待同一份数据。</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql">表复制：<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> dept2 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept;<br>dept2表中的数据：<br>	mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept2;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------------+----------+</span><br><span class="hljs-operator">|</span> DEPTNO <span class="hljs-operator">|</span> DNAME      <span class="hljs-operator">|</span> LOC      <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------------+----------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">10</span> <span class="hljs-operator">|</span> ACCOUNTING <span class="hljs-operator">|</span> <span class="hljs-keyword">NEW</span> YORK <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">20</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span> DALLAS   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">30</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span> CHICAGO  <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">40</span> <span class="hljs-operator">|</span> OPERATIONS <span class="hljs-operator">|</span> BOSTON   <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------------+----------+</span><br><br>创建视图对象：<br>	<span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> dept2_view <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept2;<br><br>删除视图对象：<br>	<span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> dept2_view;<br><br>注意：只有DQL语句才能以<span class="hljs-keyword">view</span>的形式创建。<br>	<span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> view_name <span class="hljs-keyword">as</span> 这里的语句必须是DQL语句;<br></code></pre></td></tr></table></figure><h3 id="12-1-视图的作用"><a href="#12-1-视图的作用" class="headerlink" title="12.1 视图的作用"></a>12.1 视图的作用</h3><ul><li>我们可以面向视图对象进行增删改查，对视图对象的增删改查，会导致原表被操作！（视图的特点：通过对视图的操作，会影响到原表数据。）</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span>面向视图查询<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept2_view; <br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 面向视图插入<br><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept2_view(deptno,dname,loc) <span class="hljs-keyword">values</span>(<span class="hljs-number">60</span>,<span class="hljs-string">&#x27;SALES&#x27;</span>, <span class="hljs-string">&#x27;BEIJING&#x27;</span>);<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 查询原表数据<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept2;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------------+----------+</span><br><span class="hljs-operator">|</span> DEPTNO <span class="hljs-operator">|</span> DNAME      <span class="hljs-operator">|</span> LOC      <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------------+----------+</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">10</span> <span class="hljs-operator">|</span> ACCOUNTING <span class="hljs-operator">|</span> <span class="hljs-keyword">NEW</span> YORK <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">20</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span> DALLAS   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">30</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span> CHICAGO  <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">40</span> <span class="hljs-operator">|</span> OPERATIONS <span class="hljs-operator">|</span> BOSTON   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span>     <span class="hljs-number">60</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span> BEIJING  <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+------------+----------+</span><br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 面向视图删除<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> dept2_view;<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 查询原表数据<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> dept2;<br><span class="hljs-keyword">Empty</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 创建视图对象<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> <br>	emp_dept_view<br><span class="hljs-keyword">as</span><br>	<span class="hljs-keyword">select</span> <br>		e.ename,e.sal,d.dname<br>	<span class="hljs-keyword">from</span><br>		emp e<br>	<span class="hljs-keyword">join</span><br>		dept d<br>	<span class="hljs-keyword">on</span><br>		e.deptno <span class="hljs-operator">=</span> d.deptno;<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 查询视图对象<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp_dept_view;<br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+------------+</span><br><span class="hljs-operator">|</span> ename  <span class="hljs-operator">|</span> sal     <span class="hljs-operator">|</span> dname      <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+------------+</span><br><span class="hljs-operator">|</span> CLARK  <span class="hljs-operator">|</span> <span class="hljs-number">2450.00</span> <span class="hljs-operator">|</span> ACCOUNTING <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> KING   <span class="hljs-operator">|</span> <span class="hljs-number">5000.00</span> <span class="hljs-operator">|</span> ACCOUNTING <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> MILLER <span class="hljs-operator">|</span> <span class="hljs-number">1300.00</span> <span class="hljs-operator">|</span> ACCOUNTING <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> SMITH  <span class="hljs-operator">|</span>  <span class="hljs-number">800.00</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> JONES  <span class="hljs-operator">|</span> <span class="hljs-number">2975.00</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> SCOTT  <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> ADAMS  <span class="hljs-operator">|</span> <span class="hljs-number">1100.00</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> FORD   <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span> RESEARCH   <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> ALLEN  <span class="hljs-operator">|</span> <span class="hljs-number">1600.00</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> WARD   <span class="hljs-operator">|</span> <span class="hljs-number">1250.00</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> MARTIN <span class="hljs-operator">|</span> <span class="hljs-number">1250.00</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> BLAKE  <span class="hljs-operator">|</span> <span class="hljs-number">2850.00</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> TURNER <span class="hljs-operator">|</span> <span class="hljs-number">1500.00</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> JAMES  <span class="hljs-operator">|</span>  <span class="hljs-number">950.00</span> <span class="hljs-operator">|</span> SALES      <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">--------+---------+------------+</span><br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 面向视图更新<br><span class="hljs-keyword">update</span> emp_dept_view <span class="hljs-keyword">set</span> sal <span class="hljs-operator">=</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">where</span> dname <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ACCOUNTING&#x27;</span>;<br><br><span class="hljs-operator">/</span><span class="hljs-operator">/</span> 原表数据被更新<br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> emp;<br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+-----------+------+------------+---------+---------+----</span><br><span class="hljs-operator">|</span> EMPNO <span class="hljs-operator">|</span> ENAME  <span class="hljs-operator">|</span> JOB       <span class="hljs-operator">|</span> MGR  <span class="hljs-operator">|</span> HIREDATE   <span class="hljs-operator">|</span> SAL     <span class="hljs-operator">|</span> COMM    <span class="hljs-operator">|</span> <br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+-----------+------+------------+---------+---------+----</span><br><span class="hljs-operator">|</span>  <span class="hljs-number">7369</span> <span class="hljs-operator">|</span> SMITH  <span class="hljs-operator">|</span> CLERK     <span class="hljs-operator">|</span> <span class="hljs-number">7902</span> <span class="hljs-operator">|</span> <span class="hljs-number">1980</span><span class="hljs-number">-12</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span>  <span class="hljs-number">800.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7499</span> <span class="hljs-operator">|</span> ALLEN  <span class="hljs-operator">|</span> SALESMAN  <span class="hljs-operator">|</span> <span class="hljs-number">7698</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-02</span><span class="hljs-number">-20</span> <span class="hljs-operator">|</span> <span class="hljs-number">1600.00</span> <span class="hljs-operator">|</span>  <span class="hljs-number">300.00</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7521</span> <span class="hljs-operator">|</span> WARD   <span class="hljs-operator">|</span> SALESMAN  <span class="hljs-operator">|</span> <span class="hljs-number">7698</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-02</span><span class="hljs-number">-22</span> <span class="hljs-operator">|</span> <span class="hljs-number">1250.00</span> <span class="hljs-operator">|</span>  <span class="hljs-number">500.00</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7566</span> <span class="hljs-operator">|</span> JONES  <span class="hljs-operator">|</span> MANAGER   <span class="hljs-operator">|</span> <span class="hljs-number">7839</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-04</span><span class="hljs-number">-02</span> <span class="hljs-operator">|</span> <span class="hljs-number">2975.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7654</span> <span class="hljs-operator">|</span> MARTIN <span class="hljs-operator">|</span> SALESMAN  <span class="hljs-operator">|</span> <span class="hljs-number">7698</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-09</span><span class="hljs-number">-28</span> <span class="hljs-operator">|</span> <span class="hljs-number">1250.00</span> <span class="hljs-operator">|</span> <span class="hljs-number">1400.00</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7698</span> <span class="hljs-operator">|</span> BLAKE  <span class="hljs-operator">|</span> MANAGER   <span class="hljs-operator">|</span> <span class="hljs-number">7839</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-05</span><span class="hljs-number">-01</span> <span class="hljs-operator">|</span> <span class="hljs-number">2850.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7782</span> <span class="hljs-operator">|</span> CLARK  <span class="hljs-operator">|</span> MANAGER   <span class="hljs-operator">|</span> <span class="hljs-number">7839</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-06</span><span class="hljs-number">-09</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7788</span> <span class="hljs-operator">|</span> SCOTT  <span class="hljs-operator">|</span> ANALYST   <span class="hljs-operator">|</span> <span class="hljs-number">7566</span> <span class="hljs-operator">|</span> <span class="hljs-number">1987</span><span class="hljs-number">-04</span><span class="hljs-number">-19</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7839</span> <span class="hljs-operator">|</span> KING   <span class="hljs-operator">|</span> PRESIDENT <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-11</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7844</span> <span class="hljs-operator">|</span> TURNER <span class="hljs-operator">|</span> SALESMAN  <span class="hljs-operator">|</span> <span class="hljs-number">7698</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span> <span class="hljs-operator">|</span> <span class="hljs-number">1500.00</span> <span class="hljs-operator">|</span>    <span class="hljs-number">0.00</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7876</span> <span class="hljs-operator">|</span> ADAMS  <span class="hljs-operator">|</span> CLERK     <span class="hljs-operator">|</span> <span class="hljs-number">7788</span> <span class="hljs-operator">|</span> <span class="hljs-number">1987</span><span class="hljs-number">-05</span><span class="hljs-number">-23</span> <span class="hljs-operator">|</span> <span class="hljs-number">1100.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7900</span> <span class="hljs-operator">|</span> JAMES  <span class="hljs-operator">|</span> CLERK     <span class="hljs-operator">|</span> <span class="hljs-number">7698</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-12</span><span class="hljs-number">-03</span> <span class="hljs-operator">|</span>  <span class="hljs-number">950.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7902</span> <span class="hljs-operator">|</span> FORD   <span class="hljs-operator">|</span> ANALYST   <span class="hljs-operator">|</span> <span class="hljs-number">7566</span> <span class="hljs-operator">|</span> <span class="hljs-number">1981</span><span class="hljs-number">-12</span><span class="hljs-number">-03</span> <span class="hljs-operator">|</span> <span class="hljs-number">3000.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">|</span>  <span class="hljs-number">7934</span> <span class="hljs-operator">|</span> MILLER <span class="hljs-operator">|</span> CLERK     <span class="hljs-operator">|</span> <span class="hljs-number">7782</span> <span class="hljs-operator">|</span> <span class="hljs-number">1982</span><span class="hljs-number">-01</span><span class="hljs-number">-23</span> <span class="hljs-operator">|</span> <span class="hljs-number">1000.00</span> <span class="hljs-operator">|</span>    <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span>     <br><span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+-----------+------+------------+---------+---------+----</span><br></code></pre></td></tr></table></figure><h3 id="12-2-视图在开发中的作用"><a href="#12-2-视图在开发中的作用" class="headerlink" title="12.2 视图在开发中的作用"></a>12.2 视图在开发中的作用</h3><ul><li><p>假设有一条非常复杂的SQL语句，而这条SQL语句需要在不同的位置上反复使用。<br>每一次使用这个sql语句的时候都需要重新编写，很长，很麻烦，怎么办？</p><pre><code>    可以把这条复杂的SQL语句以视图对象的形式新建。
    在需要编写这条SQL语句的位置直接使用视图对象，可以大大简化开发。
    并且利于后期的维护，因为修改的时候也只需要修改一个位置就行，只需要
    修改视图对象所映射的SQL语句。
</code></pre></li><li><p>我们以后面向视图开发的时候，使用视图的时候可以像使用table一样。</p></li><li><p>可以对视图进行增删改查等操作。<strong>视图不是在内存当中，视图对象也是存储在硬盘上的，不会消失。</strong></p></li></ul><h2 id="13-数据库三范式"><a href="#13-数据库三范式" class="headerlink" title="13. 数据库三范式"></a>13. 数据库三范式</h2><p><strong>第一范式</strong>：要求任何一张表必须有主键，每一个字段原子性不可再分。</p><p><strong>第二范式</strong>：建立在第一范式的基础之上，要求所有非主键字段完全依赖主键，<br>不要产生部分依赖。</p><p><strong>第三范式</strong>：建立在第二范式的基础之上，要求所有非主键字段直接依赖主键，<br>不要产生传递依赖。</p><ul><li>声明：三范式是面试官经常问的，所以一定要熟记在心！</li></ul><p>设计数据库表的时候，按照以上的范式进行，可以避免表中数据的冗余，空间的浪费。</p><h3 id="13-1-第一范式"><a href="#13-1-第一范式" class="headerlink" title="13.1 第一范式"></a>13.1 第一范式</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql">学生编号 学生姓名 联系方式<br>	<span class="hljs-comment">------------------------------------------</span><br>	<span class="hljs-number">1001</span>		张三		zs<span class="hljs-variable">@gmail</span>.com,<span class="hljs-number">1359999999</span><br>	<span class="hljs-number">1002</span>		李四		ls<span class="hljs-variable">@gmail</span>.com,<span class="hljs-number">13699999999</span><br>	<span class="hljs-number">1001</span>		王五		ww<span class="hljs-variable">@163</span>.net,<span class="hljs-number">13488888888</span><br>	<br>以上是学生表，满足第一范式吗？<br>	不满足，第一：没有主键。第二：联系方式可以分为邮箱地址和电话<br><br>学生编号(pk) 学生姓名	邮箱地址			联系电话<br><span class="hljs-comment">----------------------------------------------------</span><br><span class="hljs-number">1001</span>				张三		zs<span class="hljs-variable">@gmail</span>.com	<span class="hljs-number">1359999999</span><br><span class="hljs-number">1002</span>				李四		ls<span class="hljs-variable">@gmail</span>.com	<span class="hljs-number">13699999999</span><br><span class="hljs-number">1003</span>				王五		ww<span class="hljs-variable">@163</span>.net		<span class="hljs-number">13488888888</span><br></code></pre></td></tr></table></figure><h3 id="13-2-第二范式"><a href="#13-2-第二范式" class="headerlink" title="13.2 第二范式"></a>13.2 第二范式</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs sql">	学生编号 		学生姓名 	教师编号 教师姓名<br>	<span class="hljs-comment">----------------------------------------------------</span><br>	<span class="hljs-number">1001</span>			张三		<span class="hljs-number">001</span>		王老师<br>	<span class="hljs-number">1002</span>			李四		<span class="hljs-number">002</span>		赵老师<br>	<span class="hljs-number">1003</span>			王五		<span class="hljs-number">001</span>		王老师<br>	<span class="hljs-number">1001</span>			张三		<span class="hljs-number">002</span>		赵老师<br>这张表描述了学生和老师的关系：（<span class="hljs-number">1</span>个学生可能有多个老师，<span class="hljs-number">1</span>个老师有多个学生）<br>这是非常典型的：多对多关系！<br><br>分析以上的表是否满足第一范式？<br>	不满足第一范式。<br><br>怎么满足第一范式呢？修改<br><br>学生编号<span class="hljs-operator">+</span>教师编号(pk)		学生姓名  教师姓名<br><span class="hljs-comment">----------------------------------------------------</span><br><span class="hljs-number">1001</span>			<span class="hljs-number">001</span>				张三			王老师<br><span class="hljs-number">1002</span>			<span class="hljs-number">002</span>				李四			赵老师<br><span class="hljs-number">1003</span>			<span class="hljs-number">001</span>				王五			王老师<br><span class="hljs-number">1001</span>			<span class="hljs-number">002</span>				张三			赵老师<br><br>学生编号 教师编号，两个字段联合做主键，复合主键（PK: 学生编号<span class="hljs-operator">+</span>教师编号）<br>经过修改之后，以上的表满足了第一范式。但是满足第二范式吗？<br>	不满足，“张三”依赖<span class="hljs-number">1001</span>，“王老师”依赖<span class="hljs-number">001</span>，显然产生了部分依赖。<br>	产生部分依赖有什么缺点？<br>		数据冗余了。空间浪费了。“张三”重复了，“王老师”重复了。<br><br>为了让以上的表满足第二范式，你需要这样设计：<br>	使用三张表来表示多对多的关系！！！！<br>	学生表<br>	学生编号(pk)		学生名字<br>	<span class="hljs-comment">------------------------------------</span><br>	<span class="hljs-number">1001</span>					张三<br>	<span class="hljs-number">1002</span>					李四<br>	<span class="hljs-number">1003</span>					王五<br>	<br>	教师表<br>	教师编号(pk)		教师姓名<br>	<span class="hljs-comment">--------------------------------------</span><br>	<span class="hljs-number">001</span>					王老师<br>	<span class="hljs-number">002</span>					赵老师<br><br>	学生教师关系表<br>	id(pk)			学生编号(fk)			教师编号(fk)<br>	<span class="hljs-comment">------------------------------------------------------</span><br>	<span class="hljs-number">1</span>						<span class="hljs-number">1001</span>						<span class="hljs-number">001</span><br>	<span class="hljs-number">2</span>						<span class="hljs-number">1002</span>						<span class="hljs-number">002</span><br>	<span class="hljs-number">3</span>						<span class="hljs-number">1003</span>						<span class="hljs-number">001</span><br>	<span class="hljs-number">4</span>						<span class="hljs-number">1001</span>						<span class="hljs-number">002</span><br></code></pre></td></tr></table></figure><ul><li>多对多，三张表，关系表两个外键！！！！！！！！！！！！！！！</li></ul><h3 id="13-3-第三范式"><a href="#13-3-第三范式" class="headerlink" title="13.3 第三范式"></a>13.3 第三范式</h3><p>​</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs sql">	学生编号（PK） 			学生姓名  班级编号  	班级名称<br><span class="hljs-comment">---------------------------------------------------------</span><br><br>​		<span class="hljs-number">1001</span>				张三		<span class="hljs-number">01</span>			一年一班<br>​		<span class="hljs-number">1002</span>				李四		<span class="hljs-number">02</span>			一年二班<br>​		<span class="hljs-number">1003</span>				王五		<span class="hljs-number">03</span>			一年三班<br>​		<span class="hljs-number">1004</span>				赵六		<span class="hljs-number">03</span>			一年三班<br><br>以上表的设计是描述：班级和学生的关系。很显然是<span class="hljs-number">1</span>对多关系！<br>一个教室中有多个学生。<br><br>分析以上表是否满足第一范式？<br>	满足第一范式，有主键。<br><br>分析以上表是否满足第二范式？<br>	满足第二范式，因为主键不是复合主键，没有产生部分依赖。主键是单一主键。<br><br>分析以上表是否满足第三范式？<br>	第三范式要求：不要产生传递依赖！<br>	一年一班依赖<span class="hljs-number">01</span>，<span class="hljs-number">01</span>依赖<span class="hljs-number">1001</span>，产生了传递依赖。<br>	不符合第三范式的要求。产生了数据的冗余。<br><br>那么应该怎么设计一对多呢？<br><br>	班级表：一<br>	班级编号(pk)				班级名称<br>	<span class="hljs-comment">----------------------------------------</span><br>	<span class="hljs-number">01</span>								一年一班<br>	<span class="hljs-number">02</span>								一年二班<br>	<span class="hljs-number">03</span>								一年三班<br><br>	学生表：多<br><br>	学生编号（PK） 学生姓名 班级编号(fk)<br>	<span class="hljs-comment">-------------------------------------------</span><br>	<span class="hljs-number">1001</span>				张三			<span class="hljs-number">01</span>			<br>	<span class="hljs-number">1002</span>				李四			<span class="hljs-number">02</span>			<br>	<span class="hljs-number">1003</span>				王五			<span class="hljs-number">03</span>			<br>	<span class="hljs-number">1004</span>				赵六			<span class="hljs-number">03</span>		<br></code></pre></td></tr></table></figure><ul><li>一对多，两张表，多的表加外键！！！！！！！！！！！！</li></ul><p><strong>关于三范式的实际使用</strong></p><p>数据库设计三范式是理论上的，实践和理论有的时候有偏差。</p><p>最终的目的都是为了满足客户的需求，有的时候会拿冗余换执行速度。</p><p>因为在sql当中，表和表之间连接次数越多，效率越低。（笛卡尔积）</p><p>有的时候可能会存在冗余，但是为了减少表的连接次数，这样做也是合理的，并且对于开发人员来说，sql语句的编写难度也会降低。</p><p>面试的时候把这句话说上：他就不会认为你是初级程序员了！</p></div><hr><div><div class="post-metas mb-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/mySQL/">mySQL</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处来源：<a href="https://stuxiaozhang.github.io/">小张的宇宙空间站</a></p><div class="post-prevnext"><article class="post-prev col-6"><a href="/2022/04/17/%E5%B9%B6%E6%9F%A5%E9%9B%86/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">并查集</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2022/04/15/Trie%E6%A0%91/"><span class="hidden-mobile">Trie树</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments" lazyload><div id="valine"></div><script type="text/javascript">Fluid.utils.loadComments("#valine",function(){Fluid.utils.createScript("https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js",function(){var e=Object.assign({appId:"81O1jSOqY3veRxOg71BDYfri-gzGzoHsz",appKey:"CgnvRL262D07ied40NiXm2VL",placeholder:"快来评论鸭~",path:"window.location.pathname",avatar:"retro",meta:["nick","mail","link"],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"",emojiCDN:"https://cdn.bootcdn.net/ajax/libs/emojione/4.5.0/lib/js/emojione.min.js",emojiMaps:null,enableQQ:!0,requiredFields:["nick"]},{el:"#valine",path:window.location.pathname});new Valine(e)})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://stuxiaozhang.github.io" target="_blank" rel="nofollow noopener"><span>小张同学的宇宙空间站</span></a> 已经运转了<span id="timeDate">载入天数...</span><script src="/js/duration.js"></script></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="/js/local-search.js"></script><script defer src="/js/leancloud.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js"></script><script>!function(t){(0,Fluid.plugins.typing)(t.getElementById("subtitle").title)}((window,document))</script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},options:{renderActions:{findScript:[10,a=>{document.querySelectorAll('script[type^="math/tex"]').forEach(e=>{var t=!!e.type.match(/; *mode=display/);const n=new a.options.MathItem(e.textContent,a.inputJax[0],t);t=document.createTextNode("");e.parentNode.replaceChild(t,e),n.start={node:t,delim:"",n:0},n.end={node:t,delim:"",n:0},a.math.push(n)})},"",!1],insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach(e=>{let t=e.parentNode;"li"===t.nodeName.toLowerCase()&&t.parentNode.classList.add("has-jax")})},"",!1]}}}</script><script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-svg.js"></script><script src="/js/boot.js"></script></body></html>